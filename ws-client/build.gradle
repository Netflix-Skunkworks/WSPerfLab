apply plugin: "clojure"
/*
 * template derived from https://github.com/adrnai/clojure-gradle-bootstrap
 */
apply plugin: "eclipse"
apply plugin: "idea"
apply plugin: 'java'
apply plugin: 'application'

aotCompile = true
warnOnReflection = true

repositories {
  mavenCentral()
  clojarsRepo()
}

jar {
    manifest.attributes("Main-Class": "ws.client.ws_client")
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}

dependencies {
    // dependencies for java ws client - start
    compile 'com.google.code.gson:gson:2.2.4'
    compile 'org.apache.commons:commons-math:2.0'
    compile 'org.eclipse.jetty:jetty-client:9.0.3.v20130506'
    // dependencies for java ws client - end

    compile "org.clojure:clojure:1.4.0"
    compile "clj-http:clj-http:0.6.3" // https://clojars.org/clj-http
}

/* 
 * Add Counterclockwise and include 'provided' dependencies
 */
eclipse {
  project {
    natures "ccw.nature"
  }
  classpath {
    plusConfigurations += configurations.provided
    downloadSources = true
    downloadJavadoc = true
  }
}

/* 
 * Adds clojuresque to the (build) classpath
 */
buildscript {
  repositories { maven { url "http://clojars.org/repo" } }
  dependencies { classpath "clojuresque:clojuresque:1.5.4" }
}

mainClassName = "perf.client.WsClientDriver"
